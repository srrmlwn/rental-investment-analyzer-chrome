!function(t,n){var define;"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["teads-fellow"]=n():t["teads-fellow"]=n()}(this,(()=>(()=>{"use strict";var t,n,e={},o={};function i(t){var n=o[t];if(void 0!==n)return n.exports;var a=o[t]={exports:{}};return e[t](a,a.exports,i),a.exports}i.m=e,i.d=(t,n)=>{for(var e in n)i.o(n,e)&&!i.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},i.f={},i.e=t=>Promise.all(Object.keys(i.f).reduce(((n,e)=>(i.f[e](t,n),n)),[])),i.u=t=>t+".js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),t={},n="performance-tracker:",i.l=(e,o,a,r)=>{if(t[e])t[e].push(o);else{var c,s;if(void 0!==a)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var l=d[u];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==n+a){c=l;break}}c||(s=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.setAttribute("data-webpack",n+a),c.src=e),t[e]=[o];var p=(n,o)=>{c.onerror=c.onload=null,clearTimeout(w);var i=t[e];if(delete t[e],c.parentNode&&c.parentNode.removeChild(c),i&&i.forEach((t=>t(o))),n)return n(o)},w=setTimeout(p.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=p.bind(null,c.onerror),c.onload=p.bind(null,c.onload),s&&document.head.appendChild(c)}},i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var n=i.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var e=n.getElementsByTagName("script");if(e.length)for(var o=e.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=e[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{var t={284:0};i.f.j=(n,e)=>{var o=i.o(t,n)?t[n]:void 0;if(0!==o)if(o)e.push(o[2]);else{var a=new Promise(((e,i)=>o=t[n]=[e,i]));e.push(o[2]=a);var r=i.p+i.u(n),c=new Error;i.l(r,(e=>{if(i.o(t,n)&&(0!==(o=t[n])&&(t[n]=void 0),o)){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;c.message="Loading chunk "+n+" failed.\n("+a+": "+r+")",c.name="ChunkLoadError",c.type=a,c.request=r,o[1](c)}}),"chunk-"+n,n)}};var n=(n,e)=>{var o,a,[r,c,s]=e,d=0;if(r.some((n=>0!==t[n]))){for(o in c)i.o(c,o)&&(i.m[o]=c[o]);s&&s(i)}for(n&&n(e);d<r.length;d++)a=r[d],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0},e=this.webpackChunkperformance_tracker=this.webpackChunkperformance_tracker||[];e.forEach(n.bind(null,0)),e.push=n.bind(null,e.push.bind(e))})();var a={};i.r(a);const r="7.4.4_0814bad",c="https://t.teads.tv/track",s="https://cm.teads.tv/v2/advertiser",d="tag",u="outbrain",l="teads",p=132,w=[1,3,4],v="js-web",_="js-gtm";let g=!1;function f(){return window.advertiser_domain}function m(){return window.teads_buyer_pixel_id}function h(){return!0===window.teads_post_message_event_to_opener}function y(){return!0===window.teads_post_message_event_to_window}function b(t){window.teads_iab_tcf_consent_data=t}function I(){return window.teads_iab_tcf_consent_data}function E(t){window.teads_iab_gpp_consent_data=t}function C(){return window.teads_iab_gpp_consent_data}function A(t){window.teads_usp_consent_data=t}function k(){return window.teads_usp_consent_data}function S(t){window.teads_gtm_consent_data=t}function P(t){window.teads_didomi_consent_data=t}function N(t){window.teads_cookiebot_consent_data=t}function T(t){window.teads_onetrust_consent_data=t}function O(){return window.teads_gdpr_advertiser}function L(){return window.teads_ccpa_advertiser}function R(){return!0===window.teads_tracking_allowed}function D(t){window.teads_auction_id=t}function U(){return window.teads_auction_id}function x(t){const n=window.teads_auction_id_forwarded_by||{};n[t]=!0,window.teads_auction_id_forwarded_by=n}function j(t){window.teads_session_id=t}function X(){return window.teads_session_id}function F(){return window.teads_viewer_id}function M(){return!0!==window.teads_disable_first_party_cookie&&window.first_party_cookie_allowed}function G(t){window.teads_tracking_events_sent||(window.teads_tracking_events_sent=[]),window.teads_tracking_events_sent.push(t)}const B=t=>{g=t};function V(){if(void 0!==window.teads&&void 0!==window.teads.advertiserId){if("number"==typeof window.teads.advertiserId)return window.teads.advertiserId}else{if(void 0===window.teads_cv||void 0===window.teads_cv.advertiserId)return window.teads_adv_id;if("number"==typeof window.teads_cv.advertiserId)return window.teads_cv.advertiserId}}function J(){return window.teads_env&&[v,_].includes(window.teads_env)?window.teads_env:v}const W="https://l.teads.tv/performance/http-source",K={INTERNAL:"internal",BAD_INTEGRATION:"bad_integration"};function q(t){return"[object Function]"===toString.call(t)}function Y(t){let n="";const e=function(t){let n=t,e=!1;try{for(let t=0;n.parent.document!==n.document||t<50;t+=1){if(!n.parent.document){e=!0;break}n=n.parent}}catch(t){e=!0}return{topFrame:n,err:e}}(t),{topFrame:o}=e;if(e.err)try{n=o.top.location.href}catch(t){n=o.location.href}else n=o.location.href;return n}function $(t,n,e){try{const o={errorMessage:t,topUrl:Y(window),userAgent:void 0!==window.navigator&&void 0!==window.navigator.userAgent?window.navigator.userAgent:"",exception:n||"",version:r,type:e||K.BAD_INTEGRATION};t=JSON.stringify(o)}catch(t){}document.createElement("img").src="".concat(W,"?").concat(encodeURIComponent(t))}function z(t){const n=["account","password","pass","secret","secretkey","username","user","login","ordernumber","orderid","email","mail","user.email","user.password","user.name","user.mail","user.lastname","user.firstname","user.phone","user.phonenumber","lastname","firstname","name","address","phonenumber","phone","client_secret","guid"];if(""!==t){const e=t.split("?").length>1?t.split("?")[1]:void 0;if(void 0!==e){let o="".concat(t.split("?")[0],"?");const i=e.split("&");for(let t=0;t<i.length;t+=1){const e=i[t].split(/=(.+)/);o="".concat(o+(0===t?"":"&")+e[0],"=").concat(n.indexOf(e[0])>=0?"XXXXXXXX":e[1])}t=o}}return t}function H(t){try{const n=new RegExp("(?:\\?|&|%3F|%26)auctid(?:=|%3D)([0-9a-zA-Z-_]*)").exec(t);if(n&&n.length>=2)return n[1]}catch(t){$("Error when extracting Auction ID from url",null==t?void 0:t.message,K.INTERNAL)}}function Z(t,n){var e,o;const i=V(),a=m(),c=J(),s=function(t){const n=[];return Object.keys(t).forEach((e=>{n.push("".concat(e,"=").concat(encodeURIComponent(t[e])))})),n.join("&")}(n),u=Y(window),l=function(t){let n=U();if(!n){let e=t;t||(e=Y(window)),n=H(e),n&&(D(n),x("url"))}return n}(u),p=function(){const t=window.teads_auction_id_forwarded_by;return t?Object.keys(t).join(","):void 0}(),w=X(),v=F(),_=I(),g=k(),f=O(),h=L(),y=z(u);let b="?action=".concat(t,"&env=").concat(encodeURIComponent(c),"&tag_version=").concat(encodeURIComponent(r),"&provider=").concat(d);return s.length>0&&(b="".concat(b,"&").concat(s)),void 0!==a?b="".concat(b,"&buyer_pixel_id=").concat(encodeURIComponent(a)):void 0!==i&&(b="".concat(b,"&advertiser_id=").concat(encodeURIComponent(i))),b="".concat(b,"&referer=").concat(encodeURIComponent(y)),void 0!==l&&(b="".concat(b,"&auctid=").concat(l)),void 0!==p&&(b="".concat(b,"&cohort_id=").concat(p)),void 0!==w&&(b="".concat(b,"&user_session_id=").concat(w)),void 0!==v&&(b="".concat(b,"&firstPartyCookieTeadsId=").concat(v)),void 0!==(null==_||null===(e=_.data)||void 0===e?void 0:e.tcString)&&(b="".concat(b,"&gdpr_consent=").concat(_.data.tcString)),null!=f&&f.apply?b="".concat(b,"&gdpr_status=12"):void 0!==(null==f?void 0:f.apply)&&(b="".concat(b,"&gdpr_status=0")),f&&(void 0!==f.apply&&(b="".concat(b,"&gdpr_apply=").concat(f.apply)),void 0!==f.teadsConsent&&(b="".concat(b,"&gtc=").concat(f.teadsConsent)),void 0!==f.isServiceSpecific&&(b="".concat(b,"&gdpr_is_service_specific=").concat(f.isServiceSpecific)),void 0!==f.cmpId&&(b="".concat(b,"&gdpr_cmp_id=").concat(f.cmpId)),void 0!==f.apiVersion&&(b="".concat(b,"&gdpr_api_version=").concat(f.apiVersion))),void 0!==(null==g||null===(o=g.data)||void 0===o?void 0:o.usPrivacy)&&(b="".concat(b,"&ccpa_consent=").concat(g.data.usPrivacy)),h&&(void 0!==h.apply&&(b="".concat(b,"&ca=").concat(h.apply)),void 0!==h.teadsConsent&&(b="".concat(b,"&ctc=").concat(h.teadsConsent))),b}const Q=t=>(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.getElementsByTagName("script")[0].parentNode).insertBefore(t,null),tt={auctionId:{key:"tfpai",maxAge:2592e3,isJson:!0},sessionId:{key:"tfpsi",maxAge:1800,isJson:!1},viewerId:{key:"tfpvi",maxAge:7776e3,isJson:!1}};function nt(t){try{ct(t,"",f(),0,"/","none",!0)}catch(n){$('Error while deleting cookie on domain with key "'.concat(t,'"'),null==n?void 0:n.message,K.INTERNAL)}}function et(t,n,e){try{ct(t,n,f(),e,"/","none",!0)}catch(n){$('Error while setting cookie on domain with key "'.concat(t,'"'),null==n?void 0:n.message,K.INTERNAL)}}function ot(t){const n="".concat(t,"="),e=document.cookie.split(";");for(let t=0;t<e.length;t+=1)if(e[t]=e[t].trim(),0===e[t].indexOf(n))return e[t].substring(n.length,e[t].length)}function it(){let t=ot(tt.auctionId.key);try{t?(JSON.parse(atob(t)),t=atob(t)):t="{ }"}catch(n){t='{"'.concat(l,'":"').concat(t,'"}')}return t}function at(){const t=it(),n=U();if(M()&&n)try{const e=JSON.parse(t);e[l]=n,et(tt.auctionId.key,btoa(JSON.stringify(e)),tt.auctionId.maxAge)}catch(t){console.log(t),$("Error while updating auction ID in first-party cookie",null==t?void 0:t.message,K.INTERNAL)}}function rt(){const t=X();M()&&t&&et(tt.sessionId.key,t,tt.sessionId.maxAge)}function ct(t,n,e,o,i,a,r){let c="".concat(t,"=").concat(n);i&&(c+=";path=".concat(i)),"number"==typeof o&&(c+=";max-age=".concat(o)),e&&(c+=";domain=.".concat(e)),a&&(c+=";samesite=".concat(a)),r&&(c+=";secure"),document.cookie=c}function st(t){try{const n=ot(t.key);if(!n)return"";if(!t.isJson)return n;try{return JSON.parse(atob(n))[l]}catch(t){return n}}catch(n){$('Error while reading first-party cookie with key "'.concat(t.key,'"'),null==n?void 0:n.message,K.INTERNAL)}return""}const dt={PIXEL_LOADED:"TEADS_PIXEL_LOADED",PIXEL_DEBUG:"TEADS_PIXEL_DEBUG",PIXEL_EVENT:"TEADS_PIXEL_EVENT",SDK_PARAMETERS:"TEADS_SDK_PARAMETERS",ASK_PIXEL_INFO:"TEADS_ASK_PIXEL_INFO",PIXEL_INFO:"TEADS_PIXEL_INFO",CONSENT_INFO_LOADED:"TEADS_CONSENT_INFO_LOADED"};function ut(t){var n,e;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:t,id:null===(n=window)||void 0===n?void 0:n.name,ts:Date.now(),host:null===(e=window)||void 0===e||null===(e=e.location)||void 0===e?void 0:e.host,...o}}function lt(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";try{var o,i;const a=(null===(o=window)||void 0===o||null===(o=o.opener)||void 0===o?void 0:o.top)||(null===(i=window)||void 0===i?void 0:i.opener);q(a.postMessage)&&a.postMessage(ut(t,n),e)}catch(t){}}function pt(t){var n;let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/";if(q(null===(n=window)||void 0===n?void 0:n.postMessage))try{window.postMessage(ut(t,e),o)}catch(t){}}function wt(t){var n,e,o,i,a;null!==(n=window)&&void 0!==n&&n.opener&&((null==t||null===(o=t.data)||void 0===o?void 0:o.type)===dt.PIXEL_DEBUG&&(window.teads_post_message_event_to_opener=true),(null==t||null===(i=t.data)||void 0===i?void 0:i.type)===dt.SDK_PARAMETERS&&null!=t&&null!==(a=t.data)&&void 0!==a&&a.teadsClickId&&(D(t.data.teadsClickId),x("postMessage"),at())),(null==t||null===(e=t.data)||void 0===e?void 0:e.type)===dt.ASK_PIXEL_INFO&&(pt(dt.PIXEL_INFO,{buyerPixelId:m(),advertiserId:V(),trackingAllowed:R(),firstPartyCookieAllowed:M(),gdprAdvertiser:O(),ccpaAdvertiser:L(),advertiserDomain:f(),auctionId:U(),env:J(),iabData:I(),uspData:k(),gppIabData:C(),referer:z(Y(window)),trackingEventsSent:window.teads_tracking_events_sent||[],request:t.data}),window.teads_post_message_event_to_window=!0)}function vt(t){!function(t){const n=document.createElement("img");n.width=0,n.height=0,n.alt="",n.style.position="absolute",n.src=t,Q(n)}(t),h()&&lt(dt.PIXEL_EVENT,{trackingUrl:t}),y()&&pt(dt.PIXEL_EVENT,{trackingUrl:t})}async function _t(t,n){try{await fetch(t,{browsingTopics:!0,cache:"no-cache",credentials:"include",keepalive:!0}).then((()=>{h()&&lt(dt.PIXEL_EVENT,{trackingUrl:t}),y()&&pt(dt.PIXEL_EVENT,{trackingUrl:t})}))}catch(e){!1===n?$("Unable to fire a log using fetch API",null==e?void 0:e.message,K.BAD_INTEGRATION):vt(t)}}function gt(t,n,e){let o,i,a=e;for(;!o;){try{if("function"==typeof a[t]){i=a[t],o=a;break}}catch(t){}try{if(a.frames[n]){o=a;break}}catch(t){}if(a===e.top)break;a=a.parent}return{cmpFrame:o,cmpFunction:i}}function ft(t){let{hasConsent:n,type:e}=t;!function(t){let{hasConsent:n,type:e}=t;window.teads_has_consent||(window.teads_has_consent=n,window.teads_consent_handler_type=e)}({hasConsent:n,type:e})}function mt(t,n){function e(e,o){o?!1!==e.gdprApplies&&"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||(function(t){var n;null!==(n=t.vendor)&&void 0!==n&&n.consents&&!t.vendor.consents[p]||!function(t){if(null==t||!t.consents)return!0;for(const n of w)if(!1===t.consents[n])return!1;return!0}(t.purpose)?ft({hasConsent:!1}):ft({hasConsent:!0,type:"tcf"})}(e),t(e)):n("CMP unable to register callback function. Please check CMP setup.")}const o="__tcfapi",i={};function a(t){const n="".concat(o,"Return"),e="string"==typeof t.data&&"".concat(t.data).includes(n)?JSON.parse(t.data):t.data;if(e[n]&&e[n].callId){const t=e[n];void 0!==i[t.callId]&&i[t.callId](t.returnValue,t.success)}}function r(t,n,e){const r="".concat(o,"Call");window[o]=(t,e,o,a)=>{const c="".concat(Math.random()),s={[r]:{command:t,version:e,parameter:a,callId:c}};i[c]=o,n.postMessage(s,"*")},window.addEventListener("message",a,!1),window[o](t,2,e)}const{cmpFrame:c,cmpFunction:s}=gt("__tcfapi","__tcfapiLocator",window);return!!c&&(new Promise(((t,n)=>{q(s)?s("ping",2,(()=>t())):r("ping",c,(()=>t())),setTimeout((()=>n()),100)})).catch((()=>n("Unable to ping the CMP"))),q(s)?s("addEventListener",2,e):r("addEventListener",c,e),!0)}function ht(t,n){const e={};function o(t){const n=t&&t.data&&t.data.__uspapiReturn;n&&n.callId&&void 0!==e[n.callId]&&(e[n.callId](n.returnValue,n.success),delete e[n.callId])}let i=!1;function a(t,n,a){i||(window.addEventListener("message",o,!1),i=!0),function(t,o,i){const a="".concat(Math.random()),r={__uspapiCall:{command:t,version:1,callId:a}};e[a]=i,n.postMessage(r,"*")}(t,0,a)}const{cmpFrame:r,cmpFunction:c}=gt("__uspapi","__uspapiLocator",window);if(!r)return!1;new Promise(((t,n)=>{q(c)?c("getUSPData",1,(()=>t())):a("getUSPData",r,(()=>t())),setTimeout((()=>n()),100)})).catch((()=>n("Unable to ping the USP")));const s=function(){const e={};return{consentDataCallback:(o,i)=>{i&&o.uspString&&(e.usPrivacy=o.uspString,function(t,n){let{uspString:e}=t;!n||function(t){return["1NYN","1YYN"].some((n=>n===(null==t?void 0:t.toUpperCase())))}(e)?ft({hasConsent:!1}):ft({hasConsent:!0,type:"ccpa"})}(o,i)),e.usPrivacy?t(e):n("Unable to get USP consent string.")}}}();return q(c)?c("getUSPData",1,s.consentDataCallback):a("getUSPData",r,s.consentDataCallback),!0}let yt=function(t){return t.Ping="ping",t.AddEventListener="addEventListener",t.RemoveEventListener="removeEventListener",t}({}),bt=function(t){return t.Ready="ready",t.NotReady="Not ready",t}({});function It(t,n,e){return new Promise(((o,i)=>{if(void 0!==t)switch(n){case yt.Ping:t(n,((t,n)=>{n?o(t):i(new Error("Ping command failed"))}));break;case yt.AddEventListener:t(n,((t,n)=>{n?o(t):i(new Error("AddEventListener command failed"))}));break;case yt.RemoveEventListener:"number"==typeof e&&t(n,e,(()=>{}));break;default:i(new Error("Invalid GPP command"))}}))}const Et=t=>t===bt.Ready,Ct=t=>null!=t;class At{constructor(){var t,n,e;t=this,e=!1,(n=function(t){var n=function(t,n){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof n?n:n+""}(n="isGppAvailable"))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e;const{cmpFunction:o,cmpFrame:i}=gt("__gpp","__gppLocator",window);q(o)?this.gpp=o:i&&(this.gpp=At.buildCmpFunctionWithPostMessage(i)),this.isGppAvailable="function"==typeof this.gpp}static buildCmpFunctionWithPostMessage(t){const n={},e="__gpp",o="".concat(e,"Call");return t.addEventListener("message",(function(t){const o="".concat(e,"Return"),i="string"==typeof t.data&&"".concat(t.data).includes(o)?JSON.parse(t.data):t.data;if(i[o]&&i[o].callId){const t=i[o];"function"==typeof n[t.callId]&&n[t.callId](t.returnValue,t.success)}}),!1),(e,i,a)=>{const r="".concat(Math.random()),c={[o]:{command:e,version:"1.1",callId:r}};e===yt.RemoveEventListener?n[r]=a:n[r]=i,t.postMessage(c,"*")}}async retrieveConsent(t,n){if(this.isGppAvailable)try{let e;const o=await Promise.race([It(this.gpp,yt.Ping),new Promise(((t,o)=>{e=setTimeout((()=>{n("GPP ping timed out"),o("Unable to ping the GPP CMP")}),100)}))]);if(clearTimeout(e),Et(o.signalStatus)&&Ct(o.gppString))return t({applicableSections:o.applicableSections,gppString:o.gppString}),void this.parseGppString(o,t,n);const i=await It(this.gpp,yt.AddEventListener);It(this.gpp,yt.RemoveEventListener,i.listenerId);const{pingData:a}=i;if(!Et(a.signalStatus))return void n("CMP is expecting changes, consent data is not available yet");if(!Ct(a.gppString))return void n("Expected gppString to be a string but got null or undefined");const r=i.pingData;t({applicableSections:r.applicableSections,gppString:r.gppString}),this.parseGppString(r,t,n)}catch(t){n("Error during GPP command call: ".concat(t))}}async parseGppString(t,n,e){if(!this.iabLib)try{this.iabLib=await i.e(854).then(i.bind(i,854))}catch(t){return ft({hasConsent:!1}),void e("Failed to load iab library: ".concat(t))}const o=this.parseString(t.gppString);ft({hasConsent:null!=o&&o,type:o?"gpp":void 0}),n({applicableSections:t.applicableSections,gppString:t.gppString})}parseString(t){try{return this.hasConsent(t)}catch(n){if(t.startsWith("D"))try{const n=t.substring(t.indexOf("~")+1);return this.hasConsent(n)}catch(t){}return}}hasConsent(t){const n=this.iabLib.TCString.decode(t);if(n.vendorConsents.has(p))return n.purposeConsents.has(1)}retrieveConsentWithoutHolding(t,n){let e=!1,o=!1;this.retrieveConsent((n=>{o||(e=!0,t(n))}),(t=>{e||(o=!0,n(t))}))}}function kt(t,n){const e=new At;return e.isGppAvailable&&e.retrieveConsentWithoutHolding(t,n),e.isGppAvailable}function St(t,n){const e=["ad_storage","ad_user_data"];function o(){return e.every((t=>{var n;return!0===(null===(n=window.google_tag_data)||void 0===n||null===(n=n.ics)||void 0===n||null===(n=n.entries[t])||void 0===n?void 0:n.update)}))}if(window.google_tag_data){var i;const r=window.google_tag_data;return null!=r&&null!==(i=r.ics)&&void 0!==i&&i.entries?(ft({hasConsent:o(),type:"gtm"}),!o()&&null!==(a=window.google_tag_data)&&void 0!==a&&null!==(a=a.ics)&&void 0!==a&&a.addListener&&window.google_tag_data.ics.addListener(e,(function(){ft({hasConsent:o(),type:"gtm"}),t({hasConsent:o()})})),t({hasConsent:o()}),!0):(n("Unable to get consent data from GTM"),!1)}var a;return!1}function Pt(t){if(window.didomiState){const n=window.didomiState;if(!n)return!1;n.didomiPurposesConsent||(ft({hasConsent:!1,type:"di"}),t({hasConsent:!1}));const e=n.didomiPurposesConsent.indexOf("cookies")>-1&&n.didomiPurposesConsent.indexOf("measure_ad_performance")>-1;return ft({hasConsent:e,type:"di"}),t({hasConsent:e}),!0}return!1}function Nt(t){let n=!1;if(window.Cookiebot){const i=window.Cookiebot;if(i){var e,o;const a=null!==(e=null===(o=i.consent)||void 0===o?void 0:o.marketing)&&void 0!==e&&e;return ft({hasConsent:a,type:"cb"}),n||(n=!0,window.addEventListener("CookiebotOnAccept",(()=>{ft({hasConsent:!0,type:"cb"})}),!1)),t({hasConsent:a}),!0}return!1}return!1}function Tt(t){function n(){var t,n;const e=null===(t=window.OnetrustActiveGroups)||void 0===t?void 0:t.toUpperCase();return null!==(n=(null==e?void 0:e.indexOf("C0004"))>-1)&&void 0!==n&&n}var e,o,i;return!!window.OnetrustActiveGroups&&(!!(null===(e=window.OnetrustActiveGroups)||void 0===e?void 0:e.toUpperCase())&&(n()?(ft({hasConsent:!0,type:"ot"}),t({hasConsent:!0})):"OneTrust"in window&&(null===(o=window.OneTrust)||void 0===o||null===(i=o.OnConsentChanged)||void 0===i||i.call(o,(()=>{ft({hasConsent:n(),type:n()?"ot":void 0}),t({hasConsent:n()})}))),t({hasConsent:n()}),!0))}function Ot(t,n){return new Promise((e=>{t((t=>{n({data:t}),e()}),(t=>{n({error:t}),e()}))||e()}))}const Lt={conversionType:"conversion_type",price:"aepp",currency:"aepc",name:"aepn"};async function Rt(t){if(!R())return;const n=function(t,n){const e={};return Object.keys(t).forEach((n=>{const o=n,i=t[n];Object.prototype.hasOwnProperty.call(Lt,o)?e[Lt[o]]=i+"":$("Invalid parameter specified in event: ".concat(o))})),e}(t),e=c+Z("conversion",n);vt(e),G(e),async function(t){if(window.obApi&&function(t){return["AddToCart","AddToWishlist","CompleteRegistration","InitiateCheckout","Lead","Purchase","ViewContent","Search"].includes(t.conversionType)}(t)){const n={...t};t.price&&(n.orderValue="".concat(t.price)),"Purchase"===t.conversionType&&(n.orderId=t.name),delete n.conversionType,Object.keys(n).length>0?window.obApi("track",t.conversionType,n):window.obApi("track",t.conversionType)}}(t)}const Dt=t=>{const{auctionId:n,gdpr:e,ccpa:o,firstPartyCookieAllowed:i,domain:a,trackingAllowed:r}=t;var c,s,d,u;c=i,window.first_party_cookie_allowed=c,s=r,window.teads_tracking_allowed=s,e&&(d=e,window.teads_gdpr_advertiser=d),o&&function(t){window.teads_ccpa_advertiser=t}(o),a&&(u=a,window.advertiser_domain=u),n&&(D(n),x("url"))},Ut=t=>{if(t){const t=st(tt.auctionId);if(t){const n=U();n&&n!==t||x("cookie"),n||D(t)}return at(),t}return nt(tt.auctionId.key),null},xt=(t,n,e,o)=>{if(t){const t=st(tt.sessionId);n&&e&&n!==e?j(o):t?j(t):o&&j(o),rt()}else o&&j(o),nt(tt.sessionId.key)},jt=(t,n)=>{if(n&&t){const t=st(tt.viewerId);e=t||n,window.teads_viewer_id=e,function(){const t=F();M()&&t&&et(tt.viewerId.key,t,tt.viewerId.maxAge)}()}else nt(tt.viewerId.key);var e};async function Xt(){try{const t=await async function(){const t=Y(window),n=function(t){var n,e,o;const i=V(),a=m();let r="referer=".concat(encodeURIComponent(t));void 0!==a?r+="&buyer_pixel_id=".concat(encodeURIComponent(a)):void 0!==i&&(r+="&advertiser_id=".concat(encodeURIComponent(i)));const c=I();var s,d;c&&(void 0!==(null==c||null===(s=c.data)||void 0===s?void 0:s.gdprApplies)&&(r+="&gdpr_applies=".concat(encodeURIComponent(c.data.gdprApplies))),null!=c&&null!==(d=c.data)&&void 0!==d&&d.tcString&&(r+="&gdpr_consent=".concat(encodeURIComponent(c.data.tcString))),null!=c&&c.error&&(r+="&gdpr_error=".concat(encodeURIComponent(c.error))));const u=k();null!=u&&null!==(n=u.data)&&void 0!==n&&n.usPrivacy&&(r+="&ccpa_consent=".concat(encodeURIComponent(u.data.usPrivacy))),null!=u&&u.error&&(r+="&ccpa_error=".concat(encodeURIComponent(u.error)));const l=C();null!=l&&null!==(e=l.data)&&void 0!==e&&e.applicableSections&&(r+="&gpp_applicable_sections=".concat(encodeURIComponent(l.data.applicableSections.join(",")))),null!=l&&null!==(o=l.data)&&void 0!==o&&o.gppString&&(r+="&gpp_consent=".concat(encodeURIComponent(l.data.gppString))),null!=l&&l.error&&(r+="&gpp_error=".concat(encodeURIComponent(l.error)));const p=function(){const t=ot("optout");if(t)return"1"===t}();void 0!==p&&(r+="&web_opt_out=".concat(encodeURIComponent(p)));const w=window.teads_gtm_consent_data;w&&(w.data&&(r+="&gtm_consent=".concat(encodeURIComponent(w.data.hasConsent))),w.error&&(r+="&gtm_error=".concat(encodeURIComponent(w.error))));const v=window.teads_didomi_consent_data;v&&(v.data&&(r+="&didomi_consent=".concat(encodeURIComponent(v.data.hasConsent))),v.error&&(r+="&didomi_error=".concat(encodeURIComponent(v.error))));const _=window.teads_cookiebot_consent_data;_&&(_.data&&(r+="&cookiebot_consent=".concat(encodeURIComponent(_.data.hasConsent))),_.error&&(r+="&cookiebot_error=".concat(encodeURIComponent(_.error))));const g=window.teads_onetrust_consent_data;return g&&(g.data&&(r+="&onetrust_consent=".concat(encodeURIComponent(g.data.hasConsent))),g.error&&(r+="&onetrust_error=".concat(encodeURIComponent(g.error)))),r}(t);try{const t=await fetch("".concat(s,"?").concat(n),{cache:"no-cache"});if(200===(null==t?void 0:t.status)){var e,o,i,a,r,c,d,u;const n=await t.json();return{trackingAllowed:!1!==(null==n?void 0:n.tracking_allowed),firstPartyCookieAllowed:!0===(null==n?void 0:n.first_party_cookie_allowed),sessionId:null==n?void 0:n.session_id,auctionId:null==n?void 0:n.auction_id,viewerId:null==n?void 0:n.user_id,domain:null==n?void 0:n.domain,ccpa:null!=n&&n.ccpa?{apply:null===(e=n.ccpa)||void 0===e?void 0:e.apply,teadsConsent:null===(o=n.ccpa)||void 0===o?void 0:o.teads_consent}:void 0,gpp:null!=n&&n.gpp?{apply:null===(i=n.gpp)||void 0===i?void 0:i.apply,teadsConsent:null===(a=n.gpp)||void 0===a?void 0:a.teads_consent}:void 0,gdpr:null!=n&&n.gdpr?{apply:null===(r=n.gdpr)||void 0===r?void 0:r.apply,teadsConsent:null===(c=n.gdpr)||void 0===c?void 0:c.teads_consent,apiVersion:null===(d=n.gdpr)||void 0===d?void 0:d.api_version,cmpId:null===(u=n.gdpr)||void 0===u?void 0:u.cmp_id,isServiceSpecific:null==n?void 0:n.gdpr.is_service_specific}:void 0,outbrainAdvertiserId:null==n?void 0:n.outbrain_advertiser_id}}}catch(t){$("Error while trigger API to know advertiser information",null==t?void 0:t.message,K.INTERNAL)}const l=H(t);return l?{trackingAllowed:!0,firstPartyCookieAllowed:!1,auctionId:l}:{trackingAllowed:!0,firstPartyCookieAllowed:!1}}(),{sessionId:n,auctionId:e,viewerId:o,outbrainAdvertiserId:i}=t;i&&async function(t){const n='\n    !function(_window, _document) {\n        var OB_ADV_ID = "'.concat(t,"\";\n        if (_window.obApi) {\n          var toArray = function(object) {\n            return Object.prototype.toString.call(object) === '[object Array]' ? object : [object];\n          };\n          _window.obApi.marketerId = toArray(_window.obApi.marketerId).concat(toArray(OB_ADV_ID));\n          return;\n        }\n        var api = _window.obApi = function() {\n          api.dispatch ? api.dispatch.apply(api, arguments) : api.queue.push(arguments);\n        };\n        api.version = '3.0';\n        api.loaded = true;\n        api.loadedBy = 'teads';\n        api.marketerId = OB_ADV_ID;\n        api.queue = [];\n        var tag = _document.createElement('script');\n        tag.async = true;\n        tag.src = '//p.teads.tv/obtp/cp/obtp.js';\n        tag.type = 'text/javascript';\n        var script = _document.getElementsByTagName('script')[0];\n        script.parentNode.insertBefore(tag, script);\n      }(window, document);\n\n      obApi('track', 'PAGE_VIEW');\n    "),e=document.createElement("script");e.textContent=n,e.async=!0,e.defer=!0,e.type="text/javascript",document.head.appendChild(e)}(i).catch((t=>$("Error while injecting Outbrain pixel",null==t?void 0:t.message))),Dt(t);const a=M(),r=Ut(a);xt(a,r,e,n),jt(a,o),y()&&pt(dt.CONSENT_INFO_LOADED,{trackingAllowed:R(),firstPartyCookieAllowed:M(),gdprAdvertiser:O(),ccpaAdvertiser:L(),advertiserDomain:f(),auctionId:U(),iabData:I(),uspData:k()})}catch(t){$("Error while initializing advertiser",null==t?void 0:t.message,K.INTERNAL)}}const Ft=async()=>{const t=c+Z("pageView",{});vt(t),G(t),await _t(c+Z("browser-topics",{}),!1)},Mt=()=>{const t=Z("timeSpent",{}),n=c+t;B(!1),document.addEventListener("visibilitychange",(t=>()=>{"hidden"===document.visibilityState&&!0!==g&&(B(!0),async function(t,n){try{const n=navigator.sendBeacon&&navigator.sendBeacon.bind(navigator);if(!n||!n(t))throw new Error("Beacon not sent");h()&&lt(dt.PIXEL_EVENT,{trackingUrl:t}),y()&&pt(dt.PIXEL_EVENT,{trackingUrl:t})}catch(n){await _t(t,!0)}}(t),rt(),G(t))})(n))},Gt=()=>{const t=window.teads_e||[];window.teads_e=[],window.teads_e.push=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Array.prototype.push.apply(this,n),async function(){if(void 0!==window.teads_e){const t=[];for(;window.teads_e.length;)t.push(Rt(window.teads_e.shift()));try{await Promise.all(t)}catch(t){$("Error while sending event based conversion",null==t?void 0:t.message,K.INTERNAL)}rt()}else $("The event queue is not defined.")}(),window.teads_e.length},window.teads_e.push(...t)};async function Bt(){const t=V(),n=m();"number"!=typeof t&&"number"!=typeof n||(await Xt(),await async function(){R()&&(await Ft(),await Mt(),Gt())}())}async function Vt(){try{window.teads_adv_id||Object.defineProperty(window,"teads_adv_id",{set(t){this._teads_adv_id=t,Bt()},get(){return this._teads_adv_id},configurable:!0}),window.teads_buyer_pixel_id||Object.defineProperty(window,"teads_buyer_pixel_id",{set(t){this._teads_buyer_pixel_id=t,Bt()},get(){return this._teads_buyer_pixel_id},configurable:!0})}catch(t){$("Error while binding advertiser and pixel ids",null==t?void 0:t.message)}try{window.teads_setOutbrainCookieOnTeads||(window.teads_setOutbrainCookieOnTeads=function(t){const n=it(),e=JSON.parse(n);e[u]=t,et(tt.auctionId.key,btoa(JSON.stringify(e)),tt.auctionId.maxAge)}),window.teads_getOutbrainCookieFromTeads||(window.teads_getOutbrainCookieFromTeads=function(){const t=it();return JSON.parse(t)[u]})}catch(t){$("Error while loading Outbrain",null==t?void 0:t.message)}await Bt()}return async function(t){try{"undefined"!=typeof window&&(q(null===(n=window)||void 0===n?void 0:n.addEventListener)&&(lt(dt.PIXEL_LOADED),pt(dt.PIXEL_LOADED),window.addEventListener("message",wt)),await new Promise(((t,n)=>{setTimeout((()=>{Promise.all([Ot(mt,b),Ot(ht,A),Ot(kt,E),Ot(Nt,N),Ot(St,S),Ot(Pt,P),Ot(Tt,T)]).then((()=>Vt())).then(t).catch(n)}),0)})))}catch(t){$("Unhandled exception",null==t?void 0:t.message,K.INTERNAL)}var n}(),a})()));