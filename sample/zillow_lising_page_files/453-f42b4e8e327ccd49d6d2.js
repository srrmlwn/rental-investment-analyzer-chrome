"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{8899:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(8216),o=r(4695),c=r(1077),u=r(268),i=r(2953),a=r(3207),s=r(9842);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,i.Z)(e);if(t){var o=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var l=function(e){(0,c.Z)(r,e);var t=f(r);function r(e,c,u,i){var a;return(0,n.Z)(this,r),a=t.call(this,c),Object.setPrototypeOf((0,o.Z)(a),(this instanceof r?this.constructor:void 0).prototype),a.name=e,a.statusCode=u,a.type=i,(0,s.Z)()&&Error.captureStackTrace((0,o.Z)(a)),a}return r}((0,a.Z)(Error))},3813:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(8216),o=r(1077),c=r(268),u=r(2953);function i(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var a=function(e){(0,o.Z)(r,e);var t=i(r);function r(e,o,c){return(0,n.Z)(this,r),t.call(this,e,o,500,c)}return r}(r(8899).Z)},253:function(e,t,r){r.d(t,{Ap:function(){return s},Ho:function(){return l},Oq:function(){return v}});r(3813);var n=r(219),o=r(2551),c=["res"];function u(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=n.req;if(c)if(c.cookies){if(null!==(r=c.cookies)&&void 0!==r&&r[e])return decodeURIComponent(c.cookies[e])}else if(null!==(t=c.headers)&&void 0!==t&&t.cookie){var u=o.parse(c.headers.cookie);if(null!==u&&void 0!==u&&u[e])return decodeURIComponent(u[e])}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=r.res,i=(0,n.Z)(r,c);u&&u.setHeader?u.setHeader("Set-Cookie",o.serialize(e,t,i)):console.warn("setHeader is missing or res function not passed, unable to set the cookie ".concat(e,"."))}var a="shopperPlatformSubAppOverrides",s=1800;function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.request,n=t.response,o=JSON.stringify(e),c={path:"/",maxAge:s,req:r,res:n};i(a,o,c)}function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.request,n=r?{req:r}:{},o=null!==(e=u(a,n))&&void 0!==e?e:"{}";try{return JSON.parse(o)}catch(c){console.error("failed to parse key-values out of cookie ".concat(a," for shopper-platform sub-app version overrides. cookie string value: ").concat(o))}return{}}function p(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.request,o=r.response,c=null!==(t=l({request:n}))&&void 0!==t?t:{},u=c[e],i=/^\[.*\]$/i;if(u)return f(c,{request:n,response:o}),i.test(u)?JSON.parse(u):u}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.request,n=t.response,o=p(e,{request:r,response:n});if(o)return o;var c=d({request:r})[e];if(c){var u=c.version,i="".concat(r.method," ").concat(r.path," ").concat(u);r.customDatadogResourceName=i,r.subAppVersionExperiment=u}return c}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.request;return(null===t||void 0===t?void 0:t.versionExperimentContext)||{}}},9453:function(e,t,r){r.d(t,{ZP:function(){return q}});var n=r(266),o=r(2809),c=r(809),u=r.n(c),i=r(4442),a=r(4487),s=r(253),f=r(8216),l=r(1077),p=r(268),v=r(2953);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,v.Z)(e);if(t){var o=(0,v.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.Z)(this,r)}}var h=function(e){(0,l.Z)(r,e);var t=d(r);function r(e,n){return(0,f.Z)(this,r),t.call(this,e,n,404)}return r}(r(8899).Z),y=r(3813),b=r(7010),m="ECONNRESET",g="EAI_AGAIN";function k(){1}function O(){1}var Z="no root cause";function E(e){var t=e.cause;return t&&t instanceof Error?t.stack?t.stack:t.message?t.message:Z:Z}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t){if(function(e){return Boolean(e.cause&&"ChunkLoadError"===e.cause.name)}(e))!function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!r.cause)return a.Tb(r,{tags:x({},n)}),null;var o=r.cause,c=null===o||void 0===o||null===(e=o.message)||void 0===e?void 0:e.match(/[a-f0-9]+\.[a-f0-9]+\.bundle\.js/),u=c?c[0]:null!==(t=null===o||void 0===o?void 0:o.message)&&void 0!==t?t:"";o.name="Sub App Chunk Loading Error",a.Tb(o,{tags:x(x({},n),{},{bundleHash:u})})}(e,t);else{var r=new Error(e);r.name="ImportRemoteError",a.Tb(r,{tags:x({},t)})}}function q(e){return P.apply(this,arguments)}function P(){return(P=(0,n.Z)(u().mark((function e(t){var r,n,o,c,a,f,l,p,v,d,Z,R,x,q,P,S,j,A;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=t.subAppName,l=t.exposedModuleName,p=t.context,d=(v=void 0===p?{}:p).req,Z=v.res,R=t.exportName,x=void 0===R?"default":R,q=t.shouldSendErrorToSentry,P=void 0===q||q,(0,s.Oq)(f,{request:d,response:Z}),S={},e.prev=3,e.next=6,(0,i.xv)("".concat(f,"/").concat(l),{serverModuleTTL:parseInt(b.jB,10)||void 0,throwError:!0});case 6:S=e.sent,e.next=23;break;case 9:if(e.prev=9,e.t0=e.catch(3),P&&w(e.t0,{subAppName:f}),null===(j=e.t0.cause)||void 0===j||!j.code){e.next=20;break}e.t1=e.t0.cause.code,e.next=e.t1===m?16:e.t1===g?18:20;break;case 16:return k(),e.abrupt("break",20);case 18:return O(),e.abrupt("break",20);case 20:if((null===e.t0||void 0===e.t0?void 0:e.t0.type)!==i.OA.manifestEntryNotFound){e.next=22;break}throw new h("Sub-App ".concat(f,"/").concat(l," not found on manifest ImportRemoteError:\n ").concat(e.t0.stack||""," \n Cause: ").concat(E(e.t0)));case 22:throw new y.Z("Sub-App ".concat(f,"/").concat(l," execution ImportRemoteError").concat(e.t0.type?" [".concat(null===e.t0||void 0===e.t0?void 0:e.t0.type,"]"):"",":\n ").concat(e.t0.stack||""," \n Cause: ").concat(E(e.t0)),"",null===e.t0||void 0===e.t0?void 0:e.t0.type);case 23:if(A=null!==(r=null===(n=S)||void 0===n?void 0:n[x])&&void 0!==r?r:null){e.next=26;break}throw new h("Sub-App ".concat(f," does not contain a exported named ").concat(x));case 26:return e.abrupt("return",{component:A,moduleVersion:null===(o=S)||void 0===o?void 0:o.__version,getInitialProps:null!==(c=null===(a=S)||void 0===a?void 0:a.getInitialProps)&&void 0!==c?c:function(){return{}}});case 27:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}}}]);